<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ°é“æ¨¡æ‹Ÿæ¸¸æˆ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #333;
            color: white;
        }
        #game-container {
            text-align: center;
        }
        #train {
            font-size: 48px;
            margin-bottom: 20px;
        }
        #status {
            font-size: 24px;
            margin-bottom: 20px;
        }
        #passengers {
            font-size: 20px;
            margin-bottom: 20px;
        }
        #timer {
            font-size: 24px;
            margin-bottom: 20px;
        }
        #message {
            font-size: 24px;
            color: #00cc00;
        }
        .key {
            display: inline-block;
            padding: 10px 20px;
            margin: 5px;
            background-color: #555;
            border-radius: 5px;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="train">ğŸš‡</div>
        <div id="status">çŠ¶æ€ï¼šåœè½¦ä¸­</div>
        <div id="passengers">ä¹˜å®¢ï¼š0 äºº</div>
        <div id="timer">å‰©ä½™æ—¶é—´ï¼š30 ç§’</div>
        <div id="message"></div>
        <div>
            <div class="key">å¼€é—¨ï¼šO é”®</div>
            <div class="key">å…³é—¨ï¼šC é”®</div>
            <div class="key">å¯åŠ¨ï¼šS é”®</div>
        </div>
    </div>

    <script>
        const train = document.getElementById('train');
        const statusDisplay = document.getElementById('status');
        const passengersDisplay = document.getElementById('passengers');
        const timerDisplay = document.getElementById('timer');
        const messageDisplay = document.getElementById('message');

        let isDoorOpen = false;
        let isTrainMoving = false;
        let passengers = 0;
        let timeLeft = 30;
        let gameInterval;

        // åˆå§‹åŒ–æ¸¸æˆ
        function startGame() {
            timeLeft = 30;
            passengers = 0;
            isDoorOpen = false;
            isTrainMoving = false;
            statusDisplay.textContent = 'çŠ¶æ€ï¼šåœè½¦ä¸­';
            passengersDisplay.textContent = 'ä¹˜å®¢ï¼š0 äºº';
            messageDisplay.textContent = '';
            timerDisplay.textContent = `å‰©ä½™æ—¶é—´ï¼š${timeLeft} ç§’`;

            // å¼€å§‹è®¡æ—¶
            clearInterval(gameInterval);
            gameInterval = setInterval(updateGame, 1000);

            // æç¤ºç©å®¶æ“ä½œ
            messageDisplay.textContent = 'è¯·æŒ‰ O é”®å¼€é—¨';
        }

        // æ›´æ–°æ¸¸æˆçŠ¶æ€
        function updateGame() {
            timeLeft--;
            timerDisplay.textContent = `å‰©ä½™æ—¶é—´ï¼š${timeLeft} ç§’`;

            // æ£€æŸ¥æ˜¯å¦è¶…æ—¶
            if (timeLeft <= 0) {
                endGame(false);
            }
        }

        // ç»“æŸæ¸¸æˆ
        function endGame(isWin) {
            clearInterval(gameInterval);
            if (isWin) {
                messageDisplay.textContent = 'æ­å–œä½ ï¼Œå®Œæˆä»»åŠ¡ï¼';
            } else {
                messageDisplay.textContent = 'æ¸¸æˆå¤±è´¥ï¼Œè¯·é‡è¯•ï¼';
            }
        }

        // ç©å®¶æ§åˆ¶
        document.addEventListener('keydown', (e) => {
            if (e.key === 'o' || e.key === 'O') {
                if (!isTrainMoving && !isDoorOpen) {
                    isDoorOpen = true;
                    statusDisplay.textContent = 'çŠ¶æ€ï¼šå¼€é—¨ä¸­';
                    messageDisplay.textContent = 'è¯·ç­‰å¾…ä¹˜å®¢ä¸Šä¸‹è½¦...';
                    setTimeout(() => {
                        passengers += 10; // æ¨¡æ‹Ÿä¹˜å®¢ä¸Šä¸‹è½¦
                        passengersDisplay.textContent = `ä¹˜å®¢ï¼š${passengers} äºº`;
                        messageDisplay.textContent = 'è¯·æŒ‰ C é”®å…³é—¨';
                    }, 3000); // ç­‰å¾… 3 ç§’
                }
            } else if (e.key === 'c' || e.key === 'C') {
                if (isDoorOpen) {
                    isDoorOpen = false;
                    statusDisplay.textContent = 'çŠ¶æ€ï¼šå…³é—¨ä¸­';
                    messageDisplay.textContent = 'è¯·æŒ‰ S é”®å¯åŠ¨åˆ—è½¦';
                }
            } else if (e.key === 's' || e.key === 'S') {
                if (!isDoorOpen && !isTrainMoving) {
                    isTrainMoving = true;
                    statusDisplay.textContent = 'çŠ¶æ€ï¼šè¿è¡Œä¸­';
                    messageDisplay.textContent = 'åˆ—è½¦æ­£åœ¨å‰å¾€ä¸‹ä¸€ç«™...';
                    setTimeout(() => {
                        isTrainMoving = false;
                        statusDisplay.textContent = 'çŠ¶æ€ï¼šåœè½¦ä¸­';
                        messageDisplay.textContent = 'è¯·æŒ‰ O é”®å¼€é—¨';
                        if (timeLeft > 0) {
                            endGame(true); // å®Œæˆä»»åŠ¡
                        }
                    }, 5000); // æ¨¡æ‹Ÿè¿è¡Œ 5 ç§’
                }
            }
        });

        // å¯åŠ¨æ¸¸æˆ
        startGame();
    </script>
</body>
</html>